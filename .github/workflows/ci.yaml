name: CI
run-name: "${{ github.event_name == 'workflow_dispatch' && format('CI: {0}', github.ref_name) || '' }}"

on:
  push:
    branches:
      - develop
      - release
      - main
      - feature/*
  pull_request: ~
  workflow_dispatch:
    inputs:
      skip-lint:
        description: 'Skip linting'
        required: false
        default: false
        type: boolean
      skip-tests:
        description: 'Skip tests'
        required: false
        default: false
        type: boolean

jobs:
  information:
    name: Collect information
    outputs:
      package-version: ${{ steps.compute-version.outputs.pep440-version }}
      semantic-version: ${{ steps.compute-version.outputs.semantic-version }}
    runs-on: ubuntu-latest
    steps:
      #----------------------------------------------
      # Display Github environment variables
      - name: Display Github environment variables
        run: printenv | grep '^GITHUB_'

      #----------------------------------------------
      # Check-out repo
      - name: Check out repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      #----------------------------------------------
      # Compute the version of the project based in the current checkout branch
      - name: Compute version
        id: compute-version
        uses: ./.github/workflows/compute-version
